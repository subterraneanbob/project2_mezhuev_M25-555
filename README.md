# База данных

## Справка по работе с программой

После запуска программы, список команд для работы будет выведен на экран.

[![asciicast](https://asciinema.org/a/0nIzU9IsvS9hE789bkoVuDHUo.svg)](https://asciinema.org/a/0nIzU9IsvS9hE789bkoVuDHUo)

### Общие команды

- `help` - печатает справку по командам
- `exit` - выход из программы (также сработает сочетание клавиш `Ctrl+C` и `Ctrl+D`)

### Команды для работы с таблицами

Здесь перечислены команды, с помощью которых можно создавать и удалять таблицы, а также печатать список существующих таблиц.

#### Создание таблицы

Выполняется с помощью команды `create_table`:

```
create_table <имя_таблицы> <столбец1:тип> <столбец2:тип>
```

Таблицу можно создать при условии, что другой таблицы с таким же именем не существует.

Доступные типы данных для столбцов:
- `int` - целые числа
- `str` - строки
- `bool` - булевы значения

Уникальный ключ `ID:int` создаётся для каждой таблицы автоматически, если его не указать.

> Если требуется создать таблицу или объявить столбец с пробелами в названии, нужно заключить название в кавычки (например, `"user reports"`).

Примеры создания таблицы:

```
create_table users ID:int name:str age:int is_active:bool
```

Результат:

```
Таблица "users" успешно создана со столбцами: ID:int, name:str, age:int, is_active:bool
```

Ещё один пример (с пробелами в названии):

```
create_table "user reports" "user id":int title:str complete:bool
```

Результат:

```
Таблица "user reports" успешно создана со столбцами: ID:int, user id:int, title:str, complete:bool
```

#### Удаление таблиц

Удалить таблицу можно, выполнив команду `drop_table` (естественно, таблица должна существовать):

```
drop_table <имя_таблицы>
```

Пример использования:

```
drop_table users
```

Результат:

```
Таблица "users" успешно удалена.
```


#### Список существующих таблиц

Список существующих таблиц можно вывести, воспользовавшись командой `list_tables` (без параметров):

```
list_tables
```

В результате получаем список таблиц:

```
- users
- user reports
```

#### Информация о таблице

Выводит информацию о столбцах таблицы (названия и типы данных) и количество записей в этой таблице:

```
info <имя_таблицы>
```

Для таблицы `users`:

```
info users
```

Результат:

```
Таблица: users
Столбцы: ID:int, name:str, age:int, is_active:bool
Количество записей: 10
```

### CRUD-операции

В этом разделе перечислены команды, позволяющие выполнять набор CRUD-операций (Create, Read, Update, Delete) над данными из таблиц.

Работа с данными показана в демонстрации ниже.

[![asciicast](https://asciinema.org/a/z6SVyyZdMVFofmCZjfE4wH0Xt.svg)](https://asciinema.org/a/z6SVyyZdMVFofmCZjfE4wH0Xt)

#### Добавление новых записей

Для добавления новых записей используется команда `insert`:

```
insert into <имя_таблицы> values (<значение1>, <значение2>, ...)
```

Значения для всех столбцов в таблице, кроме уникального ключа `ID`, должны быть переданы в качестве параметров. Для столбцов с разными типами данных нужно следовать следующим правилам:
- для `int` нужно указывать целое число без кавычек. Допускается использование знаков + и - перед числом (`123`, `+456`, `-789`)
- для `bool` можно указывать только значения `true` или `false`
- значения `str` всегда задаются в кавычках (двойных или одинарных - `"Alice"`, `'Bob'`)

Для `ID` значение будет сформировано и показано в сообщении после завершения операции.

Пример использования:

```
insert into users values ("Alice", 28, true)
```

Результат:

```
Запись с ID=1 успешно добавлена в таблицу "users".
```

#### Выбор записей из таблицы

Для выбора записей из таблицы применяется команда `select`. Выбирать можно как все записи, так и по некоторому условию.

##### Выбор всех записей

Синтаксис:

```
select from <имя_таблицы>
```

Например, команда:

```
select from users
```

печатает все записи из таблицы:

```
+----+-------+-----+-----------+
| ID |  name | age | is_active |
+----+-------+-----+-----------+
| 1  | Alice |  28 |    True   |
| 2  |  Bob  |  30 |   False   |
+----+-------+-----+-----------+
```

##### Выбор записей по условию

Аналогично предыдущей команде, но добавляется условие `where`:

```
select from <имя_таблицы> where <столбец> = <значение>
```

Здесь, также как и с командой `insert`, нужно правильно указывать типы данных в условии.

Все эти запросы:

```
select from users where ID=1
```

```
select from users where name = "Alice"
```

```
select from users where is_active = true
```

вернут один результат:

```
+----+-------+-----+-----------+
| ID |  name | age | is_active |
+----+-------+-----+-----------+
| 1  | Alice |  28 |    True   |
+----+-------+-----+-----------+
```

#### Обновление существующих записей

Для этого действия применяется команда `update`. Её синтаксис:

```
update <имя_таблицы> set <столбец> = <новое_значение> where <столбец_условия> = <значение_условия>
```

В блоке `set` задаётся столбец, значения в котором нужно изменить, и значение для замены. В блоке `where` - условие для выбора строк, в которых замена будет произведена (аналогично команде `select`).

Пример выполнения:

```
update users set is_active = true where name = 'Bob'
```

Сообщение об успешном выполнении:

```
Запись с ID=2 в таблице "users" успешно обновлена.
```

#### Удаление записей

Для удаления записей из таблицы можно использовать команду `delete`. Для удаления нужно указать условие `where`, которому должны удовлетворять все строки, которые требуется удалить:

```
delete from <имя_таблицы> where <столбец> = <значение>
```

Пример использования:

```
delete from users where age = 30
```

Эта команда выведет ключи записей, которые были удалены.

```
Запись с ID=2 успешно удалена из таблицы "users".
```
